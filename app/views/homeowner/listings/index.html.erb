<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="fw-bold mb-0">My Listings</h2>

    <%= link_to "Post New Listing",
                new_listing_path,
                class: "btn btn-primary" %>
  </div>

  <% if @listings.any? %>
    <table class="table table-hover align-middle">
      <thead class="table-dark">
      <tr>
        <th>Title</th>
        <th>Type</th>
        <th>Status</th>
        <th>Budget</th>
        <th class="text-end">Actions</th>
      </tr>
      </thead>

      <tbody>
      <% @listings.each do |listing| %>
        <tr>
          <td>
            <%= link_to listing.title,
                        homeowner_listing_path(listing),
                        class: "fw-semibold text-decoration-none" %>
          </td>

          <td><%= listing.listing_type.humanize %></td>

          <td>
              <span class="badge
                <%= listing.open? ? 'bg-secondary' :
                                                 listing.awarded? ? 'bg-success' :
                                                   'bg-dark' %>">
                <%= listing.status.humanize %>
              </span>
          </td>

          <td><%= number_to_currency(listing.budget) %></td>

          <td class="text-end">
            <%= link_to "View",
                        homeowner_listing_path(listing),
                        class: "btn btn-sm btn-outline-primary me-1" %>

            <% if listing.open? %>
              <%= link_to "Edit",
                          edit_homeowner_listing_path(listing),
                          class: "btn btn-sm btn-outline-warning me-1" %>
            <% end %>

            <%= button_to "Delete",
                          homeowner_listing_path(listing),
                          method: :delete,
                          data: { confirm: "Delete this listing?" },
                          class: "btn btn-sm btn-outline-danger d-inline" %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  <% else %>
    <div class="alert alert-light border text-center p-4">
      <h5 class="mb-2">No listings yet</h5>
      <p class="text-muted mb-3">
        Post a listing to start receiving bids from service providers.
      </p>

      <%= link_to "Post Your First Listing",
                  new_listing_path,
                  class: "btn btn-primary" %>
    </div>
  <% end %>

</div>


