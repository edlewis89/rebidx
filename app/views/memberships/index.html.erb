<div class="container mt-5">
  <div class="text-center mb-4">
    <h2 class="fw-bold">Upgrade Homeowner Plan</h2>
    <p class="text-muted">Get more listings and higher visibility</p>
  </div>

  <div class="row g-4">
    <% @memberships.each do |membership| %>
      <% features = membership.features || {} %>

      <div class="col-md-4">
        <div class="card shadow-sm h-100 <%= 'border-primary' if membership == @current_membership %>">
          <div class="card-body text-center">

            <% if membership == @current_membership %>
              <span class="badge bg-primary mb-2">Current Plan</span>
            <% end %>

            <h4 class="fw-bold"><%= membership.name %></h4>

            <h2 class="my-3">
              <%= membership.price_cents.zero? ? "Free" : number_to_currency(membership.price_cents / 100.0) %>
              <small class="text-muted fs-6">/mo</small>
            </h2>

            <ul class="list-unstyled text-start mt-3 small">
              <li>ğŸ“¨ Messaging: <%= features["messaging"] ? "âœ…" : "âŒ" %></li>
              <li>ğŸ“Š Max Listings / Month: <strong><%= features["max_listings"] || 0 %></strong></li>
              <li>â­ Featured Listings: <%= features["featured_listings"] ? "âœ…" : "âŒ" %></li>
<!--              <li>ğŸš€ Can Bid High Value: <%#= features["can_bid_high_value"] ? "âœ…" : "âŒ" %></li>-->
              <% if features["priority_support"] %>
                <li>ğŸ’ Priority Support: âœ…</li>
              <% end %>
              <%# if features["bid_range"] %>
<!--                <li>ğŸ’° Bid Range: <%#= number_to_currency(features["bid_range"]["low"]) %> â€“ <%#= number_to_currency(features["bid_range"]["high"]) %></li>-->
              <%# end %>
            </ul>

            <% if membership != @current_membership %>
              <%= button_to "Upgrade",
                            create_membership_payment_payments_path(membership_id: membership.id),
                            method: :post,
                            class: "btn btn-primary mt-3 w-100" %>
            <% else %>
              <button class="btn btn-outline-secondary mt-3 w-100" disabled>
                Current Plan
              </button>
            <% end %>

          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
